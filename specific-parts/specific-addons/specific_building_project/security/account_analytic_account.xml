<?xml version="1.0"?>
<odoo>
  <record model="ir.rule" id="rule_department_manager_project_create">
    <field name="active" eval="1" />
    <field name="domain_force">[('department_id.manager_id.user_id', '=', user.id)]</field>
    <field name="model_id" ref="project.model_project_project" />
    <field name="name">Department manager can create projects for their department</field>
    <field name="perm_create" eval="1" />
    <field name="perm_read" eval="0" />
    <field name="perm_unlink" eval="1" />
    <field name="perm_write" eval="0" />
  </record>
  <record model="ir.rule" id="rule_department_project_only">
    <field name="active" eval="1" />
    <field name="domain_force">['|', '|', ('department_id', '=', False), ('department_id', 'child_of', [user.department_id.id]), ('department_id', 'parent_of', [user.department_id.id])]</field>
    <field name="model_id" ref="analytic.model_account_analytic_account" />
    <field name="name">Users can see only projects of their department</field>
    <field name="perm_create" eval="1" />
    <field name="perm_read" eval="1" />
    <field name="perm_unlink" eval="1" />
    <field name="perm_write" eval="1" />
  </record>
</odoo>
